/*
 * traffic_light_project.c
 *
 * Created: 8/18/2022 10:27:25 AM
 * Author : omar
 */ 

#include "avr/interrupt.h"

#define F_CPU 8000000UL
#include "UTIL/STD_TYPES.h"
#include "UTIL/REG.h"
#include "UTIL/BIT_MATH.h"
#include "MCAL/DIO/DIO.h"
#include "MCAL/EXT_INT/EXT_INT.h"
#include "MCAL/TIMER/TIMER.h"
#include "HAL/LED/LED.h"
#include "HAL/P_B/P_B.h"

int main(void)
{
 
 LED_INIT(CAR_LEDS_PORT,CAR_LED_G_PIN);
 LED_INIT(CAR_LEDS_PORT,CAR_LED_Y_PIN);
 LED_INIT(CAR_LEDS_PORT,CAR_LED_R_PIN);
 LED_INIT(WALKER_LEDS_PORT,WALKER_LED_G_PIN);
 LED_INIT(WALKER_LEDS_PORT,WALKER_LED_Y_PIN);
 LED_INIT(WALKER_LEDS_PORT,WALKER_LED_R_PIN);
  
  P_B_INIT();
    while (1) 
    {
	    u8 x = P_B_READ();

		if (x == 0)
		{
			LED_ON(CAR_LEDS_PORT,CAR_LED_G_PIN);
			LED_ON(CAR_LEDS_PORT,CAR_LED_Y_PIN);
			LED_ON(CAR_LEDS_PORT,CAR_LED_R_PIN);
			LED_ON(WALKER_LEDS_PORT,WALKER_LED_G_PIN);
			LED_ON(WALKER_LEDS_PORT,WALKER_LED_Y_PIN);
			LED_ON(WALKER_LEDS_PORT,WALKER_LED_R_PIN);
		} 
		else
		{
			LED_OFF(CAR_LEDS_PORT,CAR_LED_G_PIN);
			LED_OFF(CAR_LEDS_PORT,CAR_LED_Y_PIN);
			LED_OFF(CAR_LEDS_PORT,CAR_LED_R_PIN);
			LED_OFF(WALKER_LEDS_PORT,WALKER_LED_G_PIN);
			LED_OFF(WALKER_LEDS_PORT,WALKER_LED_Y_PIN);
			LED_OFF(WALKER_LEDS_PORT,WALKER_LED_R_PIN);
		}
		
    }
}
